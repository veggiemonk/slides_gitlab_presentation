<h2>Operations append new versions to history</h2>

<p> push a new version on the stack, and run an operation</p>

<pre><code class="lang-javascript" data-trim>
function operation(fn) {

// eliminate the future
history = history.slice(0, historyIndex + 1);

// create a new version by applying an operation to the head
var newVersion = fn(history[historyIndex]);
    history.push(newVersion);
    historyIndex++;
}
</code></pre>
<pre><code class="lang-javascript" data-trim>
function changeHeight(height) {
    operation(function(data) {
        return data.set('height', height);
    });
}
</code></pre>
